from snakemake.utils import min_version
min_version("5.12.0")

report: "report/workflow.rst"
configfile: "config/config.yaml"

include: "rules/common.smk"
include: "rules/remote.smk"
include: "rules/noise.smk"
include: "rules/sb9.smk"
include: "rules/inference.smk"
include: "rules/simulations.smk"
include: "rules/figures.smk"

rule all:
    input:
        get_filename_for_dataset("inference/inferred.fits.gz"),
        get_filename_for_dataset("simulations/inferred.fits.gz"),
        expand(get_filename_for_dataset("figures/{figure}.pdf"), figure=FIGURES)

rule catalog:
    input:
        get_filename_for_dataset("inference/inferred.fits.gz")

rule simulations:
    input:
        get_filename_for_dataset("simulations/inferred.fits.gz")

rule figures:
    input:
        expand(get_filename_for_dataset("figures/{figure}.pdf"), figure=FIGURES)
